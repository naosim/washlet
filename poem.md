# はじめに
ウォシュレットのモデリングをします。
状態遷移図と状態遷移表はこちら。

## 状態遷移図
後で書く


## 状態遷移表
括弧はその状態に入ったときに起きる振る舞い

イベント | 待ち     | 準備完了(水止まる) | おしり(水出る) | ビデ(水出る)
---------|----------|--------------------|----------------|---------
座る     | 準備完了 |                    |                | 
立つ     |          | 待ち               |                |
おしり   |          | おしり             |                | おしり
ビデ     |          | ビデ               | ビデ           |
停止     |          |                    | 準備完了       | 準備完了




# 基本形 Washlet_allinone
1つのクラスに状態遷移表の振る舞いがすべて書かれています。  
これくらいのコード量ならこれで特に問題ないですが、コードが太ってくるとつらくなるのでリファクタします。
このコードのつらいところは、「イベントに対する条件分岐」
と「それに対する振る舞い」が同じ所に書かれていること。
たとえばおしりイベントが発生した時はこう。
「おしりイベントが発生し、状態が準備完了であれば(条件分岐)、水を出す(振る舞い)」

# 状態と振る舞いをセットにしてみる
状態遷移図の状態単位でクラス化してみます。
それがWashlet_statepatternです。
stateパッケージ配下に状態ごとのクラスがあります。
state配下をクラス図にすると
例えば待ち状態のWashletWaitingに座るイベント(sitDown)が来ると準備完了(WashletReady)状態に移ることがクラス図から分かります。
